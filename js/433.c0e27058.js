"use strict";(self["webpackChunkmoire"]=self["webpackChunkmoire"]||[]).push([[433],{3093:function(e,r,t){t.d(r,{Z:function(){return f}});var n=t(3396),o=t(7139),a=t(9242);const i={class:"breadcrumbs"},l=["onClick"];function s(e,r,t,s,d,u){return(0,n.wg)(),(0,n.iD)("ul",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.crumbs,(e=>((0,n.wg)(),(0,n.iD)("li",{class:"breadcrumbs__item",key:e.key},[(0,n.wy)((0,n._)("a",{class:"breadcrumbs__link"},(0,o.zw)(e.title),513),[[a.F8,!e.force]]),(0,n.wy)((0,n._)("a",{class:"breadcrumbs__link",href:"#",onClick:(0,a.iM)((r=>u.goto(e)),["prevent"])},(0,o.zw)(e.title),9,l),[[a.F8,e.force]])])))),128))])}t(7658);var d={name:"BaseBreadcrumbs",props:["crumbs"],methods:{goto(e){e.force&&this.$router.push({name:e.route,query:e.params})}}},u=t(89);const c=(0,u.Z)(d,[["render",s]]);var f=c},8026:function(e,r,t){t.d(r,{Z:function(){return m}});var n=t(3396),o=t(7139);const a={class:"cart__orders"},i=(0,n._)("br",null,null,-1),l={class:"cart__total"};function s(e,r,t,s,d,u){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("ul",a,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.cartInfo,(r=>((0,n.wg)(),(0,n.iD)("li",{class:"cart__order",key:r.id},[(0,n._)("h3",null,(0,o.zw)(r.product.title),1),(0,n._)("div",null,[(0,n._)("b",null,(0,o.zw)(e.numberFormat(r.product.price*(r.quantity||r.amount)))+" ₽",1),i,(0,n.Uk)((0,o.zw)(r.quantity||r.amount)+" шт. ",1)]),(0,n._)("span",null,"Артикул: "+(0,o.zw)(r.product.id),1)])))),128))]),(0,n._)("div",l,[(0,n._)("p",null,[(0,n.Uk)(" Доставка: "),(0,n._)("b",null,(0,o.zw)(t.delivery),1)]),(0,n._)("p",null,[(0,n.Uk)(" Итого: "),(0,n._)("b",null,(0,o.zw)(e.countProductsString(u.productsCount)),1),(0,n.Uk)(" на сумму "),(0,n._)("b",null,(0,o.zw)(e.numberFormat(u.totalPrice))+" ₽",1)])])])}var d=t(4693),u={name:"CartContentList",components:{},props:["cartInfo","delivery"],model:{},data(){return{}},computed:{productsCount(){return this.cartInfo.length},totalPrice(){return this.cartInfo.reduce(((e,r)=>e+r.product.price*(r.quantity||r.amount)),0)}},mixins:[d.ZP]},c=t(89);const f=(0,c.Z)(u,[["render",s]]);var m=f},4433:function(e,r,t){t.r(r),t.d(r,{default:function(){return P}});var n=t(3396),o=t(7139);const a={class:"content container"},i={class:"content__top"},l={class:"content__title"},s={class:"cart"},d={class:"cart__form form",action:"#",method:"POST"},u={class:"cart__field"},c=(0,n._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),f={class:"dictionary"},m={class:"cart__total"};function _(e,r,t,_,p,I){const v=(0,n.up)("ProductBreadcrumbs"),h=(0,n.up)("SpinnerSpring"),b=(0,n.up)("BaseDictItem"),g=(0,n.up)("CartContent");return(0,n.wg)(),(0,n.iD)("main",a,[(0,n._)("div",i,[(0,n.Wm)(v,{crumbs:I.breadcrumbsData},null,8,["crumbs"]),(0,n.Wm)(h,{visible:p.orderInfoLoading,size:"large"},null,8,["visible"]),(0,n._)("h1",l,[(0,n.Uk)(" Заказ оформлен "),(0,n._)("span",null,"№ "+(0,o.zw)(I.orderInfo.id),1)])]),(0,n._)("section",s,[(0,n._)("form",d,[(0,n._)("div",u,[c,(0,n._)("ul",f,[(0,n.Wm)(b,{"field-name":"Получатель","field-value":I.orderInfo.name},null,8,["field-value"]),(0,n.Wm)(b,{"field-name":"Адрес доставки","field-value":I.orderInfo.address},null,8,["field-value"]),(0,n.Wm)(b,{"field-name":"Телефон","field-value":I.orderInfo.phone},null,8,["field-value"]),(0,n.Wm)(b,{"field-name":"Email","field-value":I.orderInfo.email},null,8,["field-value"]),(0,n.Wm)(b,{"field-name":"Способ оплаты","field-value":I.orderInfo.paymentType},null,8,["field-value"])])]),(0,n._)("div",m,[(0,n.Wm)(g,{cartInfo:I.cartInfo,delivery:e.deliveryFormat(I.orderInfo.deliveryType)},null,8,["cartInfo","delivery"])])])])])}t(7658);var p=t(3093),I=t(8026),v=t(4693);const h={class:"dictionary__item"},b={class:"dictionary__key"},g={class:"dictionary__value"};function y(e,r,t,a,i,l){return(0,n.wg)(),(0,n.iD)("li",h,[(0,n._)("span",b,(0,o.zw)(t.fieldName),1),(0,n._)("span",g,(0,o.zw)(t.fieldValue),1)])}var w={name:"BaseDictItem",props:["fieldName","fieldValue"]},k=t(89);const z=(0,k.Z)(w,[["render",y]]);var C=z,D=t(8455),L=t(3448),Z=t(65),O=t(1445),S={name:"OrderInfoView",data(){return{orderInfoLoading:!1,orderInfoLoadingFailed:!1,orderInfoLoadingErrorCode:null}},computed:{...(0,Z.Se)({orderInfoStore:"orderInfo",userAccessKey:"userAccessKey"}),breadcrumbsData(){return[{title:"Каталог",route:"catalog",force:!0},{title:"Корзина",route:"cart",force:!0},{title:"Оформление заказа"}]},orderInfo(){return this.orderInfoStore||{}},cartInfo(){return this.orderInfo.basket?.items||[]}},components:{ProductBreadcrumbs:p.Z,CartContent:I.Z,BaseDictItem:C,SpinnerSpring:D.Z},methods:{...(0,Z.nv)(["addNotification"]),...(0,Z.OI)(["updateOrderInfo"]),startLoading(){this.orderInfoLoading=!0,this.orderInfoLoadingFailed=!1,clearTimeout(this.loadOrderInfoTimer)},stopLoading(){this.orderInfoLoading=!1},loadOrderInfo(){this.startLoading(),this.loadOrderInfoTimer=setTimeout((()=>{(0,L.f_)(this.$route.params.id,{userAccessKey:this.userAccessKey}).then((e=>{this.updateOrderInfo(e.data)})).catch((e=>{console.log(e),this.$router.push({name:"notFound"}),this.addNotification({text:O.R0.find((r=>r.code==e.response.status))?.caption??e.response.statusText,type:"error"})})).finally((()=>{this.stopLoading()}))}),500)}},mixins:[v.ZP],created(){this.orderInfo.id!==this.$route.params.id&&this.loadOrderInfo()}};const F=(0,k.Z)(S,[["render",_]]);var P=F}}]);
//# sourceMappingURL=433.c0e27058.js.map
{"version":3,"file":"js/202.aafe4bb2.js","mappings":"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","sources":["webpack://moire/./src/helpers/colorsPhotosGallery.js","webpack://moire/./src/components/base/BaseCounter.vue","webpack://moire/./src/components/base/BaseCounter.vue?0960","webpack://moire/./src/components/products/ProductItemPopup.vue","webpack://moire/./src/components/base/BasePopup.vue","webpack://moire/./src/components/base/BasePopup.vue?dd71","webpack://moire/./src/components/products/ProductItemPopup.vue?38cd","webpack://moire/./src/components/products/ProductViewPhotos.vue","webpack://moire/./src/components/products/ProductViewPhotos.vue?7fd8","webpack://moire/./src/components/products/selects/ProductColorsSelect.vue","webpack://moire/./src/components/products/selects/ProductColorsSelect.vue?e373","webpack://moire/./src/components/products/selects/ProductSizesSelect.vue","webpack://moire/./src/components/products/selects/ProductSizesSelect.vue?66ed"],"sourcesContent":["import defaultImageSrc from '@/assets/no-photo.jpg';\n\nexport default function colorsPhotosGallery(productColors, currentColorId) {\n  const arr = [];\n\n  productColors.forEach((item) => {\n    let gallery;\n    if (!item.gallery?.length || !item.gallery[0].file?.url) {\n      gallery = [{ file: { url: defaultImageSrc } }];\n    } else {\n      gallery = item.gallery;\n    }\n\n    let photoNotChosen = true;\n    const itemIsCurrent = item.color.id === currentColorId;\n\n    let i = 0;\n    gallery.forEach((photo) => {\n      arr.push({\n        id: `${item.color.id}/${i}-${photo.file.url}`,\n        color: item.id,\n        colorId: item.color.id,\n        photo: photo.file.url,\n        isCurrent: itemIsCurrent && photoNotChosen,\n        colorCurrent: itemIsCurrent,\n      });\n      photoNotChosen = false; // проставляем текущим только первое фото\n      i++;\n    });\n  });\n\n  return arr;\n}\n","<template>\n  <div class=\"form__counter\">\n    <button type=\"button\" aria-label=\"Убрать один товар\" @click=\"decrease\">\n      <svg width=\"12\" height=\"12\" fill=\"currentColor\">\n        <use xlink:href=\"#icon-minus\"></use>\n      </svg>\n    </button>\n\n    <input name=\"count\" id=\"count\" v-model.number=\"count\" @input=\"update\" />\n\n    <button type=\"button\" aria-label=\"Добавить один товар\" @click=\"increase\">\n      <svg width=\"12\" height=\"12\" fill=\"currentColor\">\n        <use xlink:href=\"#icon-plus\"></use>\n      </svg>\n    </button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BaseCounter',\n  props: ['amount', 'minVal'],\n  emits: ['update:amount'],\n  data() {\n    return {\n      count: 1,\n    };\n  },\n  computed: {\n    minValue() {\n      return parseInt(this.minVal, 10) || 0;\n    },\n  },\n  methods: {\n    checkValue(value) {\n      if (!value || !parseInt(value, 10)) return this.minValue;\n      return Math.max(value, this.minValue);\n    },\n    update() {\n      this.count = this.checkValue(this.count);\n      this.onChange();\n    },\n    increase() {\n      this.count = this.checkValue(this.count + 1);\n      this.onChange();\n    },\n    decrease() {\n      this.count = this.checkValue(this.count - 1);\n      this.onChange();\n    },\n    onChange() {\n      this.$emit('update:amount', this.count);\n    },\n  },\n  watch: {\n    amount() {\n      // если произошла ошибка изменения числа товара при обращении к серверу, вернуть значение в счетчике обратно\n      if (this.amount !== this.count) {\n        this.count = this.amount;\n      }\n    },\n  },\n  mounted() {\n    this.count = this.amount; // сможем задать стартовую величину кол-ва в родительском компоненте\n  },\n};\n</script>\n","import { render } from \"./BaseCounter.vue?vue&type=template&id=4788a912\"\nimport script from \"./BaseCounter.vue?vue&type=script&lang=js\"\nexport * from \"./BaseCounter.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <Popup\n    :title=\"product.title\"\n    submit-button-title=\"В корзину\"\n    @cancel=\"cancelAddingToCart\"\n    @submit=\"addToCart\"\n  >\n    <section class=\"item-popup\">\n      <SpinnerSpring\n        class=\"item-popup__spinner\"\n        :visible=\"productLoading\"\n        size=\"medium\"\n      />\n      <section class=\"item item-popup__content\">\n        <!-- фото -->\n        <ProductViewPhotos\n          class=\"item-popup__photos\"\n          :photos=\"photos\"\n          v-model:photo-id=\"photo\"\n          :title=\"product.title\"\n          :gallery-visible=\"false\"\n          main-photo-height=\"100%\"\n        />\n\n        <!-- параметры -->\n        <div class=\"item-popup__params\">\n          <span class=\"item__code\">Артикул: {{ product.id }}</span>\n          <h2 class=\"item__title item-popup__title\">{{ product.title }}</h2>\n\n          <!-- количество -->\n          <div class=\"item__row item__row--center\">\n            <BaseCounter min-val=\"1\" v-model:amount=\"amount\" />\n            <!-- цена -->\n            <b v-if=\"!productLoading\" class=\"item__price item-popup__price\"\n              >{{ numberFormat(product.price) }} ₽</b\n            >\n          </div>\n\n          <div class=\"item__row\">\n            <!-- цвет -->\n            <ColorsSelect :colors=\"product.colors\" v-model:color=\"color\" />\n            <!-- размер -->\n            <SizesSelect :sizes=\"product.sizes\" v-model:size=\"size\" />\n          </div>\n        </div>\n      </section>\n    </section>\n  </Popup>\n</template>\n\n<style lang=\"sass\">\n.item-popup\n  display: flex\n  flex-direction: column\n  justify-content: stretch\n  align-items: stretch\n  max-height: 100%\n  width: 100%\n  &__spinner\n    flex-grow: 0\n    flex-shrink: 0\n  &__content\n    flex-grow: 1\n    flex-shrink: 1\n    display: grid\n    grid-template-columns: 1fr 2fr\n    margin-bottom: 20px\n    width: 100%\n    height: 100%\n  &__photos\n    max-height: 400px\n  &__title\n    margin: 10px 0\n    font-size: 34px\n  &__price\n    font-size: 30px\n</style>\n\n<script>\nimport Popup from '@/components/base/BasePopup.vue';\nimport SpinnerSpring from '@/components/base/spinners/SpinnerSpring.vue';\nimport ProductViewPhotos from './ProductViewPhotos.vue';\nimport BaseCounter from '@/components/base/BaseCounter.vue';\nimport ColorsSelect from '@/components/products/selects/ProductColorsSelect.vue';\nimport SizesSelect from '@/components/products/selects/ProductSizesSelect.vue';\nimport functionsMixin from '@/mixins/functionsMixin';\nimport photosGallery from '@/helpers/colorsPhotosGallery';\nimport { apiLoadProduct } from '@/api/api';\nimport { errors } from '@/mixins/dictsMixin';\n\nexport default {\n  name: 'PopupProductView',\n  props: ['productId', 'colorId'],\n  emits: ['cancelled', 'added:productToCart'],\n  data() {\n    return {\n      color: null,\n      size: null,\n      photo: null,\n      amount: 1,\n      productData: null,\n      productLoading: false,\n      productLoadingFailed: false,\n      productLoadingErrorCode: null,\n    };\n  },\n  computed: {\n    product() {\n      return this.productData ? { ...this.productData } : {};\n    },\n    photos() {\n      if (!this.product?.colors?.length) return [];\n      return photosGallery(this.product.colors, this.colorId);\n    },\n    productGallery() {\n      if (!this.product?.colors?.length) return [];\n\n      const productColorsArrayItem = this.product.colors.find(\n        (item) => item.id === this.color, // выбираются фото нужного цвета\n      );\n\n      if (!productColorsArrayItem || !productColorsArrayItem.gallery?.length)\n        return [];\n\n      return productColorsArrayItem.gallery;\n    },\n    // получить код из справочника цветов под коду цвета из объекта товара\n    getColorId() {\n      if (!this.product?.colors?.length) return '';\n      const color = this.product.colors.find((item) => {\n        return item.id === this.color;\n      });\n      return color?.color.id;\n    },\n  },\n  methods: {\n    cancelAddingToCart() {\n      this.$emit('cancelled');\n    },\n    addToCart() {\n      const currentProduct = {\n        productId: this.product?.id,\n        colorId: this.getColorId,\n        sizeId: this.size,\n        quantity: this.amount,\n      };\n\n      this.$emit('added:productToCart', currentProduct);\n    },\n\n    startLoading() {\n      this.productLoading = true;\n      this.productLoadingFailed = false;\n      clearTimeout(this.loadProductTimer);\n    },\n    stopLoading() {\n      this.productLoading = false;\n    },\n    // + notification\n    loadProduct() {\n      this.startLoading();\n      // таймер для того, чтобы при изменении фильтров не вызывалась загрузка несколько раз подряд\n      this.loadProductTimer = setTimeout(() => {\n        apiLoadProduct(this.productId)\n          .then((response) => {\n            this.productData = response.data;\n          })\n          .catch((error) => {\n            this.productLoadingErrorCode = error.response.status;\n            this.productLoadingFailed = true;\n\n            this.addNotification({\n              text:\n                errors.find((item) => item.code == error.response.status)\n                  ?.caption ?? error.response.statusText,\n              type: 'error',\n            });\n          })\n          .finally(() => this.stopLoading());\n      }, 0);\n    },\n  },\n  watch: {\n    product() {\n      // здесь нужен наблюдатель, т.к. продукт требует времени для загрузки\n      this.color = this.colorId || this.product.colors[0].id; // цвет берется из параметра маршрутизации\n      this.size = this.product.sizes[0].id; // первый доступный размер\n    },\n    productId() {\n      this.loadProduct();\n    },\n\n    // -----------------------------------------------------\n    color() {\n      // список фото выбранного цвета\n      const newColorPhotos = this.photos.filter((value) => {\n        return value.color === this.color;\n      });\n      if (!newColorPhotos?.length) return;\n\n      // если список id фото выбранного цвета не включают текущее фото, выбрать первое фото этого списка\n      if (!newColorPhotos.map((item) => item.id).includes(this.photo)) {\n        this.photo = newColorPhotos[0].id;\n      }\n    },\n    // -----------------------------------------------------\n    photo() {\n      // цвет выбранного фото\n      const newColor = this.photos.find(\n        (item) => item.id === this.photo,\n      )?.color;\n      if (!newColor) return;\n\n      // если цвет выбранного фото не совпадает с цветом текущего фото, поменять текущий цвет (теоретически в этом смысла нет)\n      if (newColor !== this.color) {\n        this.color = newColor;\n      }\n    },\n  },\n  components: {\n    Popup,\n    SpinnerSpring,\n    ProductViewPhotos,\n    BaseCounter,\n    ColorsSelect,\n    SizesSelect,\n  },\n  mixins: [functionsMixin],\n  mounted() {\n    this.loadProduct();\n  },\n};\n</script>\n","<template>\n  <!-- ! модалку размещаем в телепорте на главной странице (см. App.vue в конце) -->\n  <teleport to=\"#teleport-target\">\n    <div class=\"popup\" ref=\"popup\">\n      <div class=\"popup__wrapper\">\n        <div class=\"popup__header\">\n          <span>Выбор параметров товара</span>\n          <span class=\"popup__header-close\" title=\"Закрыть\" @click=\"cancel\"\n            ><i class=\"material-icons\">close</i></span\n          >\n        </div>\n\n        <div class=\"popup__content\">\n          <slot></slot>\n        </div>\n\n        <div class=\"popup__footer\">\n          <button\n            class=\"button button--second popup__btn popup__btn--close\"\n            @click=\"cancel\"\n          >\n            Закрыть\n          </button>\n          <button\n            class=\"button button--primery popup__btn popup__btn--submit\"\n            @click=\"submit\"\n          >\n            {{ submitButtonTitle || 'ОК' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<style lang=\"sass\">\n.popup\n  position: fixed\n  top: 0\n  bottom: 0\n  right: 0\n  left: 0\n  z-index: 99\n  display: flex\n  justify-content: center\n  align-items: center\n  background: rgba(51, 51, 51, 0.6)\n  &__wrapper\n    display: flex\n    flex-direction: column\n    justify-content: stretch\n    align-items: stretch\n    padding: 30px\n    padding-left: 50px\n    background-color: white\n    // border: 1px solid #222\n    box-shadow: 4px 4px 8px 0px rgba(black, 0.5)\n    width: 800px\n    // height: 600px\n    max-height: 600px\n    overflow: auto\n  &__header\n    flex-grow: 0\n    flex-shrink: 0\n    display: flex\n    justify-content: space-between\n    align-items: center\n    margin-bottom: 20px\n    font-size: 25px\n    &-close\n      &:hover\n        cursor: pointer\n  &__content\n    flex-grow: 1\n    flex-shrink: 1\n    display: flex\n    justify-content: center\n    align-items: flex-start\n  &__footer\n    flex-grow: 0\n    flex-shrink: 0\n    display: flex\n    justify-content: flex-end\n    align-items: stretch\n  &__btn\n    display: flex\n    align-items: center\n    justify-content: center\n    padding: 15px 15px 12px\n    width: 160px\n  // &__btn--submit\n  //   width: 160px\n  &__btn--close\n    margin-right: 20px\n</style>\n\n<script>\nexport default {\n  name: 'ProductItemPopup',\n  props: ['title', 'submitButtonTitle'],\n  emits: ['submit', 'cancel'],\n  methods: {\n    stopScrolling() {\n      document.body.style.paddingRight =\n        window.innerWidth - document.documentElement.clientWidth + 'px'; // чтобы не происходил визуальный скачок интерфейса\n      document.body.style.overflow = 'hidden';\n    },\n    startScrolling() {\n      document.body.style.overflow = 'auto';\n      document.body.style.paddingRight = 'null';\n    },\n    cancel() {\n      this.startScrolling();\n      this.$emit('cancel');\n    },\n    submit() {\n      this.startScrolling();\n      this.$emit('submit');\n    },\n  },\n  mounted() {\n    const context = this;\n    context.stopScrolling();\n    document.addEventListener('click', (item) => {\n      // закрыть модальное окно при клике вне его\n      if (item.target === context.$refs['popup']) {\n        context.cancel();\n      }\n    });\n  },\n};\n</script>\n","import { render } from \"./BasePopup.vue?vue&type=template&id=56ffe9c8\"\nimport script from \"./BasePopup.vue?vue&type=script&lang=js\"\nexport * from \"./BasePopup.vue?vue&type=script&lang=js\"\n\nimport \"./BasePopup.vue?vue&type=style&index=0&id=56ffe9c8&lang=sass\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductItemPopup.vue?vue&type=template&id=8135e882\"\nimport script from \"./ProductItemPopup.vue?vue&type=script&lang=js\"\nexport * from \"./ProductItemPopup.vue?vue&type=script&lang=js\"\n\nimport \"./ProductItemPopup.vue?vue&type=style&index=0&id=8135e882&lang=sass\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"item__pics pics\">\n    <div class=\"pics__wrapper\" :style=\"{ height: mainPhotoHeight }\">\n      <img\n        :src=\"photo\"\n        :alt=\"title || 'Фото'\"\n        class=\"pics__main\"\n        :style=\"{ height: mainPhotoHeight }\"\n      />\n    </div>\n    <ul class=\"pics__list\" v-if=\"showGallery\">\n      <li class=\"pics__item\" v-for=\"photo in photos\" :key=\"photo.id\">\n        <a\n          href=\"#\"\n          class=\"pics__link\"\n          :class=\"{\n            'pics__link--current': photo.isCurrent,\n          }\"\n          @click.prevent=\"changeProductImage(photo.id)\"\n        >\n          <img :src=\"photo.photo\" :alt=\"title\" />\n        </a>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"sass\">\n.pics\n  overflow: hidden\n.pics__wrapper\n  overflow: hidden\n  &:last-child\n    margin-bottom: 0\n.pics__main\n  width: 100%\n  object-fit: cover\n</style>\n\n<script>\nimport defaultImageSrc from '@/assets/no-photo.jpg';\n\nexport default {\n  name: 'ProductViewPhotos',\n  props: [\n    'photos',\n    'photoId',\n    'title',\n    'galleryVisible',\n    'mainPhotoWidth',\n    'mainPhotoHeight',\n  ],\n  emits: ['update:photoId'],\n  computed: {\n    photo: {\n      get() {\n        return (\n          this.photos.find((item) => item.id === this.photoId)?.photo ||\n          defaultImageSrc\n        );\n      },\n      set(value) {\n        this.$emit('update:photoId', value);\n      },\n    },\n    showGallery() {\n      return this.galleryVisible ?? true;\n    },\n    getMainPhotoSizes() {\n      let width = Number(this.mainPhotoWidth);\n      if (Number.isNaN(width)) width = 570;\n      let height = Number(this.mainPhotoHeight);\n      if (Number.isNaN(height)) height = 570;\n\n      return { width, height };\n    },\n  },\n  methods: {\n    changeProductImage(photo) {\n      this.photo = photo;\n    },\n  },\n};\n</script>\n","import { render } from \"./ProductViewPhotos.vue?vue&type=template&id=d642b2b8\"\nimport script from \"./ProductViewPhotos.vue?vue&type=script&lang=js\"\nexport * from \"./ProductViewPhotos.vue?vue&type=script&lang=js\"\n\nimport \"./ProductViewPhotos.vue?vue&type=style&index=0&id=d642b2b8&lang=sass\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <fieldset class=\"form__block\">\n    <legend class=\"form__legend\">Цвет</legend>\n    <ul class=\"colors colors--black\">\n      <li\n        class=\"colors__item\"\n        v-for=\"productColor in colors\"\n        :key=\"productColor.id\"\n      >\n        <label class=\"colors__label\">\n          <input\n            class=\"colors__radio sr-only\"\n            type=\"radio\"\n            name=\"color-item\"\n            :value=\"productColor.id\"\n            v-model=\"currentColor\"\n          />\n          <span\n            class=\"colors__value\"\n            :style=\"{ 'background-color': productColor.color.code }\"\n            :title=\"productColor.title\"\n          >\n          </span>\n        </label>\n      </li>\n    </ul>\n  </fieldset>\n</template>\n\n<script>\nexport default {\n  name: 'ColorsSelect',\n  props: ['colors', 'color'], // ! обязательно указываем модельный параметр, чтобы считать из него значение при инициализации компонента!\n  emits: ['update:color'],\n  computed: {\n    currentColor: {\n      get() {\n        return this.color;\n      },\n      set(value) {\n        this.$emit('update:color', value);\n      },\n    },\n  },\n};\n</script>\n","import { render } from \"./ProductColorsSelect.vue?vue&type=template&id=c62ee1c4\"\nimport script from \"./ProductColorsSelect.vue?vue&type=script&lang=js\"\nexport * from \"./ProductColorsSelect.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <fieldset class=\"form__block\">\n    <legend class=\"form__legend\">Размер</legend>\n    <label class=\"form__label form__label--small form__label--select\">\n      <select class=\"form__select\" name=\"size\" v-model=\"currentSize\">\n        <option v-for=\"size in sizes\" :key=\"size.id\" :value=\"size.id\">\n          {{ size.title }}\n        </option>\n      </select>\n    </label>\n  </fieldset>\n</template>\n\n<script>\nexport default {\n  name: 'SizesSelect',\n  props: ['sizes', 'size'], // ! обязательно указываем модельный параметр, чтобы считать из него значение при инициализации компонента!\n  emits: ['update:size'],\n  computed: {\n    currentSize: {\n      get() {\n        return this.size;\n      },\n      set(value) {\n        this.$emit('update:size', value);\n      },\n    },\n  },\n};\n</script>\n","import { render } from \"./ProductSizesSelect.vue?vue&type=template&id=99b73bc8\"\nimport script from \"./ProductSizesSelect.vue?vue&type=script&lang=js\"\nexport * from \"./ProductSizesSelect.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["colorsPhotosGallery","productColors","currentColorId","arr","forEach","item","gallery","length","file","url","defaultImageSrc","photoNotChosen","itemIsCurrent","color","id","i","photo","push","colorId","isCurrent","colorCurrent","class","_createElementVNode","width","height","fill","_hoisted_2","_hoisted_4","_createElementBlock","_hoisted_1","type","onClick","_cache","args","$options","decrease","name","$data","count","$event","onInput","update","increase","props","emits","data","computed","minValue","parseInt","this","minVal","methods","checkValue","value","Math","max","onChange","$emit","watch","amount","mounted","__exports__","render","_createBlock","_component_Popup","title","product","onCancel","cancelAddingToCart","onSubmit","addToCart","_createVNode","_component_SpinnerSpring","visible","productLoading","size","_component_ProductViewPhotos","photos","_hoisted_3","_toDisplayString","_hoisted_5","_hoisted_6","_component_BaseCounter","_hoisted_7","_ctx","numberFormat","price","_hoisted_8","_component_ColorsSelect","colors","_component_SizesSelect","sizes","ref","_Teleport","to","cancel","_renderSlot","$slots","submit","$props","submitButtonTitle","stopScrolling","document","body","style","paddingRight","window","innerWidth","documentElement","clientWidth","overflow","startScrolling","context","addEventListener","target","$refs","productData","productLoadingFailed","productLoadingErrorCode","photosGallery","productGallery","productColorsArrayItem","find","getColorId","currentProduct","productId","sizeId","quantity","startLoading","clearTimeout","loadProductTimer","stopLoading","loadProduct","setTimeout","apiLoadProduct","then","response","catch","error","status","addNotification","text","errors","code","caption","statusText","finally","newColorPhotos","filter","map","includes","newColor","components","Popup","SpinnerSpring","ProductViewPhotos","BaseCounter","ColorsSelect","SizesSelect","mixins","functionsMixin","_normalizeStyle","mainPhotoHeight","src","alt","showGallery","_Fragment","_renderList","key","href","_normalizeClass","_withModifiers","changeProductImage","get","photoId","set","galleryVisible","getMainPhotoSizes","Number","mainPhotoWidth","isNaN","productColor","currentColor","currentSize"],"sourceRoot":""}
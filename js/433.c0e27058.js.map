{"version":3,"file":"js/433.c0e27058.js","mappings":"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","sources":["webpack://moire/./src/components/base/BaseBreadcrumbs.vue","webpack://moire/./src/components/base/BaseBreadcrumbs.vue?2579","webpack://moire/./src/components/cart/CartContent.vue","webpack://moire/./src/components/cart/CartContent.vue?82bf","webpack://moire/./src/views/OrderInfoView.vue","webpack://moire/./src/components/base/BaseDictItem.vue","webpack://moire/./src/components/base/BaseDictItem.vue?2d9a","webpack://moire/./src/views/OrderInfoView.vue?8f27"],"sourcesContent":["<template>\n  <ul class=\"breadcrumbs\">\n    <!-- ! js-способ маршрутизации -->\n    <li class=\"breadcrumbs__item\" v-for=\"crumb in crumbs\" :key=\"crumb.key\">\n      <!-- делаем без ссылки в случае, если не указан явный переход по клику -->\n      <a class=\"breadcrumbs__link\" v-show=\"!crumb.force\">{{ crumb.title }}</a>\n      <!-- в противном случае делаем полноценную ссылку -->\n      <a\n        class=\"breadcrumbs__link\"\n        v-show=\"crumb.force\"\n        href=\"#\"\n        @click.prevent=\"goto(crumb)\"\n      >\n        {{ crumb.title }}</a\n      >\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  name: 'BaseBreadcrumbs',\n  props: ['crumbs'],\n  methods: {\n    goto(crumb) {\n      if (!crumb.force) return;\n      this.$router.push({ name: crumb.route, query: crumb.params }); // перевели фильтр на query вместо params\n    },\n  },\n};\n</script>\n","import { render } from \"./BaseBreadcrumbs.vue?vue&type=template&id=dc80a984\"\nimport script from \"./BaseBreadcrumbs.vue?vue&type=script&lang=js\"\nexport * from \"./BaseBreadcrumbs.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <ul class=\"cart__orders\">\n      <li class=\"cart__order\" v-for=\"item in cartInfo\" :key=\"item.id\">\n        <h3>{{ item.product.title }}</h3>\n        <div>\n          <b\n            >{{\n              numberFormat(item.product.price * (item.quantity || item.amount))\n            }}\n            ₽</b\n          ><br />{{ item.quantity || item.amount }} шт.\n        </div>\n        <span>Артикул: {{ item.product.id }}</span>\n      </li>\n    </ul>\n\n    <div class=\"cart__total\">\n      <p>\n        Доставка: <b>{{ delivery }}</b>\n      </p>\n      <p>\n        Итого: <b>{{ countProductsString(productsCount) }}</b> на сумму\n        <b>{{ numberFormat(totalPrice) }} ₽</b>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport functionsMixin from '@/mixins/functionsMixin';\n\nexport default {\n  name: 'CartContentList',\n  components: {},\n  props: ['cartInfo', 'delivery'],\n  model: {},\n  data() {\n    return {};\n  },\n  computed: {\n    productsCount() {\n      return this.cartInfo.length;\n    },\n    totalPrice() {\n      return this.cartInfo.reduce(\n        (sum, item) =>\n          sum + item.product.price * (item.quantity || item.amount),\n        0,\n      );\n    },\n  },\n  mixins: [functionsMixin],\n};\n</script>\n","import { render } from \"./CartContent.vue?vue&type=template&id=80a675ca\"\nimport script from \"./CartContent.vue?vue&type=script&lang=js\"\nexport * from \"./CartContent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <main class=\"content container\">\n    <div class=\"content__top\">\n      <ProductBreadcrumbs :crumbs=\"breadcrumbsData\" />\n\n      <SpinnerSpring :visible=\"orderInfoLoading\" size=\"large\" />\n\n      <h1 class=\"content__title\">\n        Заказ оформлен <span>№ {{ orderInfo.id }}</span>\n      </h1>\n    </div>\n\n    <section class=\"cart\">\n      <form class=\"cart__form form\" action=\"#\" method=\"POST\">\n        <div class=\"cart__field\">\n          <p class=\"cart__message\">\n            Благодарим за&nbsp;выбор нашего магазина. На&nbsp;Вашу почту придет\n            письмо с&nbsp;деталями заказа. Наши менеджеры свяжутся с&nbsp;Вами\n            в&nbsp;течение часа для уточнения деталей доставки.\n          </p>\n\n          <ul class=\"dictionary\">\n            <BaseDictItem\n              field-name=\"Получатель\"\n              :field-value=\"orderInfo.name\"\n            />\n            <BaseDictItem\n              field-name=\"Адрес доставки\"\n              :field-value=\"orderInfo.address\"\n            />\n            <BaseDictItem field-name=\"Телефон\" :field-value=\"orderInfo.phone\" />\n            <BaseDictItem field-name=\"Email\" :field-value=\"orderInfo.email\" />\n            <BaseDictItem\n              field-name=\"Способ оплаты\"\n              :field-value=\"orderInfo.paymentType\"\n            />\n          </ul>\n        </div>\n\n        <div class=\"cart__total\">\n          <CartContent\n            :cartInfo=\"cartInfo\"\n            :delivery=\"deliveryFormat(orderInfo.deliveryType)\"\n          />\n        </div>\n      </form>\n    </section>\n  </main>\n</template>\n\n<script>\nimport ProductBreadcrumbs from '@/components/base/BaseBreadcrumbs.vue';\nimport CartContent from '@/components/cart/CartContent.vue';\nimport functionsMixin from '@/mixins/functionsMixin';\nimport BaseDictItem from '@/components/base/BaseDictItem.vue';\nimport SpinnerSpring from '@/components/base/spinners/SpinnerSpring.vue';\nimport { apiLoadOrderInfo } from '@/api/api';\nimport { mapActions, mapGetters, mapMutations } from 'vuex';\nimport { errors } from '@/mixins/dictsMixin';\n\nexport default {\n  name: 'OrderInfoView',\n  data() {\n    return {\n      orderInfoLoading: false,\n      orderInfoLoadingFailed: false,\n      orderInfoLoadingErrorCode: null,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      orderInfoStore: 'orderInfo',\n      userAccessKey: 'userAccessKey',\n    }),\n\n    breadcrumbsData() {\n      return [\n        {\n          title: 'Каталог',\n          route: 'catalog',\n          force: true,\n        },\n        {\n          title: 'Корзина',\n          route: 'cart',\n          force: true,\n        },\n        {\n          title: 'Оформление заказа',\n        },\n      ];\n    },\n    orderInfo() {\n      return this.orderInfoStore || {}; //this.$store.state.orders.orderInfo || {};\n    },\n    cartInfo() {\n      return this.orderInfo.basket?.items || [];\n    },\n  },\n  components: {\n    ProductBreadcrumbs,\n    CartContent,\n    BaseDictItem,\n    SpinnerSpring,\n  },\n  methods: {\n    ...mapActions(['addNotification']),\n    ...mapMutations(['updateOrderInfo']),\n\n    startLoading() {\n      this.orderInfoLoading = true;\n      this.orderInfoLoadingFailed = false;\n      clearTimeout(this.loadOrderInfoTimer);\n    },\n    stopLoading() {\n      this.orderInfoLoading = false;\n    },\n    // + notification\n    loadOrderInfo() {\n      this.startLoading();\n      // таймер для того, чтобы при изменении фильтров не вызывалась загрузка несколько раз подряд\n      this.loadOrderInfoTimer = setTimeout(() => {\n        apiLoadOrderInfo(this.$route.params.id, {\n          userAccessKey: this.userAccessKey,\n        })\n          .then((response) => {\n            this.updateOrderInfo(response.data);\n          })\n          .catch((error) => {\n            console.log(error);\n\n            this.$router.push({ name: 'notFound' });\n\n            this.addNotification({\n              text:\n                errors.find((item) => item.code == error.response.status)\n                  ?.caption ?? error.response.statusText,\n              type: 'error',\n            });\n          })\n          .finally(() => {\n            this.stopLoading();\n          });\n      }, 500);\n    },\n  },\n  mixins: [functionsMixin],\n  created() {\n    if (this.orderInfo.id === this.$route.params.id) {\n      return; // не выполняем извлечение дважды, т.к. после создания данные уже извлечены в $store\n    }\n    this.loadOrderInfo();\n  },\n};\n</script>\n","<template>\n  <li class=\"dictionary__item\">\n    <span class=\"dictionary__key\">{{ fieldName }}</span>\n    <span class=\"dictionary__value\">{{ fieldValue }}</span>\n  </li>\n</template>\n\n<script>\nexport default {\n  name: 'BaseDictItem',\n  props: ['fieldName', 'fieldValue'],\n};\n</script>\n","import { render } from \"./BaseDictItem.vue?vue&type=template&id=aef19398\"\nimport script from \"./BaseDictItem.vue?vue&type=script&lang=js\"\nexport * from \"./BaseDictItem.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OrderInfoView.vue?vue&type=template&id=63a273ba\"\nimport script from \"./OrderInfoView.vue?vue&type=script&lang=js\"\nexport * from \"./OrderInfoView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_Fragment","_renderList","$props","crumbs","crumb","key","_createElementVNode","_toDisplayString","title","force","href","onClick","_withModifiers","$event","$options","goto","_hoisted_2","name","props","methods","this","$router","push","route","query","params","__exports__","render","cartInfo","item","id","product","_ctx","numberFormat","price","quantity","amount","_hoisted_3","delivery","countProductsString","productsCount","totalPrice","components","model","data","computed","length","reduce","sum","mixins","functionsMixin","action","method","_createVNode","_component_ProductBreadcrumbs","breadcrumbsData","_component_SpinnerSpring","visible","$data","orderInfoLoading","size","orderInfo","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_component_BaseDictItem","address","phone","email","paymentType","_hoisted_9","_component_CartContent","deliveryFormat","deliveryType","fieldName","fieldValue","orderInfoLoadingFailed","orderInfoLoadingErrorCode","mapGetters","orderInfoStore","userAccessKey","basket","items","ProductBreadcrumbs","CartContent","BaseDictItem","SpinnerSpring","mapActions","mapMutations","startLoading","clearTimeout","loadOrderInfoTimer","stopLoading","loadOrderInfo","setTimeout","apiLoadOrderInfo","$route","then","response","updateOrderInfo","catch","error","console","log","addNotification","text","errors","find","code","status","caption","statusText","type","finally","created"],"sourceRoot":""}
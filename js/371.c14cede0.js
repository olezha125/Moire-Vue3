"use strict";(self["webpackChunkmoire"]=self["webpackChunkmoire"]||[]).push([[371],{3093:function(t,e,r){r.d(e,{Z:function(){return m}});var n=r(3396),o=r(7139),i=r(9242);const c={class:"breadcrumbs"},a=["onClick"];function u(t,e,r,u,s,l){return(0,n.wg)(),(0,n.iD)("ul",c,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.crumbs,(t=>((0,n.wg)(),(0,n.iD)("li",{class:"breadcrumbs__item",key:t.key},[(0,n.wy)((0,n._)("a",{class:"breadcrumbs__link"},(0,o.zw)(t.title),513),[[i.F8,!t.force]]),(0,n.wy)((0,n._)("a",{class:"breadcrumbs__link",href:"#",onClick:(0,i.iM)((e=>l.goto(t)),["prevent"])},(0,o.zw)(t.title),9,a),[[i.F8,t.force]])])))),128))])}r(7658);var s={name:"BaseBreadcrumbs",props:["crumbs"],methods:{goto(t){t.force&&this.$router.push({name:t.route,query:t.params})}}},l=r(89);const d=(0,l.Z)(s,[["render",u]]);var m=d},2374:function(t,e,r){r.d(e,{Z:function(){return _}});var n=r(3396),o=r(9242);const i={class:"form__counter"},c=(0,n._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,n._)("use",{"xlink:href":"#icon-minus"})],-1),a=[c],u=(0,n._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,n._)("use",{"xlink:href":"#icon-plus"})],-1),s=[u];function l(t,e,r,c,u,l){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(...t)=>l.decrease&&l.decrease(...t))},a),(0,n.wy)((0,n._)("input",{name:"count",id:"count","onUpdate:modelValue":e[1]||(e[1]=t=>u.count=t),onInput:e[2]||(e[2]=(...t)=>l.update&&l.update(...t))},null,544),[[o.nr,u.count,void 0,{number:!0}]]),(0,n._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[3]||(e[3]=(...t)=>l.increase&&l.increase(...t))},s)])}var d={name:"BaseCounter",props:["amount","minVal"],emits:["update:amount"],data(){return{count:1}},computed:{minValue(){return parseInt(this.minVal,10)||0}},methods:{checkValue(t){return t&&parseInt(t,10)?Math.max(t,this.minValue):this.minValue},update(){this.count=this.checkValue(this.count),this.onChange()},increase(){this.count=this.checkValue(this.count+1),this.onChange()},decrease(){this.count=this.checkValue(this.count-1),this.onChange()},onChange(){this.$emit("update:amount",this.count)}},watch:{amount(){this.amount!==this.count&&(this.count=this.amount)}},mounted(){this.count=this.amount}},m=r(89);const p=(0,m.Z)(d,[["render",l]]);var _=p},4371:function(t,e,r){r.r(e),r.d(e,{default:function(){return q}});var n=r(3396),o=r(7139);const i={class:"content container"},c={class:"content__top"},a={class:"content__row"},u=(0,n._)("h1",{class:"content__title"},"Корзина",-1),s={class:"content__info"},l={class:"cart"},d={class:"cart__form form",action:"#",method:"POST"},m={class:"cart__field"},p={class:"cart__list"},_={class:"cart__block"},h=(0,n._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),b={class:"cart__price"};function g(t,e,r,g,f,C){const w=(0,n.up)("Breadcrumbs"),k=(0,n.up)("SpinnerSpring"),v=(0,n.up)("CartItem"),y=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("main",i,[(0,n._)("div",c,[(0,n.Wm)(w,{crumbs:C.breadcrumbsData},null,8,["crumbs"]),(0,n._)("div",a,[u,(0,n._)("span",s,(0,o.zw)(t.countProductsString(t.productsCount)),1)])]),(0,n._)("section",l,[(0,n.Wm)(k,{visible:t.cartLoading,size:"large"},null,8,["visible"]),(0,n._)("form",d,[(0,n._)("div",m,[(0,n._)("ul",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.products,(t=>((0,n.wg)(),(0,n.j4)(v,{key:t.id,item:t},null,8,["item"])))),128))])]),(0,n._)("div",_,[h,(0,n._)("p",b,[(0,n.Uk)(" Итого: "),(0,n._)("span",null,(0,o.zw)(t.numberFormat(t.totalPrice))+" ₽",1)]),(0,n.Wm)(y,{to:{name:"order"}},{default:(0,n.w5)((()=>[(0,n._)("button",{class:"cart__button button button--primery",type:"submit",style:(0,o.j5)(`display:${C.buttonCreateOrderDisplay}`)}," Оформить заказ ",4)])),_:1})])])])])}var f=r(3093),C=r(65),w=(r(7658),r(9242));const k={class:"cart__item product"},v={class:"product__pic"},y=["src","alt"],P={class:"product__title"},D={class:"product__info product__info--color"},z={class:"product__code"},V={class:"product__price"},Z=(0,n._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,n._)("use",{"xlink:href":"#icon-close"})],-1),S=[Z];function I(t,e,r,i,c,a){const u=(0,n.up)("BaseCounter");return(0,n.wg)(),(0,n.iD)("li",k,[(0,n._)("div",v,[(0,n._)("img",{src:a.imageSrc,width:"120",height:"120",alt:r.item.product.title,onClick:e[0]||(e[0]=(0,w.iM)((e=>t.$router.push({name:"product",params:{id:r.item.product.id},query:{color:a.colorId}})),["prevent"]))},null,8,y)]),(0,n._)("h3",P,[(0,n._)("span",null,(0,o.zw)(`${r.item.product.title}`),1),(0,n._)("span",null,(0,o.zw)(`(размер ${r.item.sizeCaption})`),1)]),(0,n._)("p",D,[(0,n.Uk)(" Цвет: "),(0,n._)("span",null,[(0,n._)("i",{class:"product__color",style:(0,o.j5)({"background-color":r.item.colorCode})},null,4),(0,n.Uk)(" "+(0,o.zw)(r.item.colorCaption),1)])]),(0,n._)("span",z," Артикул: "+(0,o.zw)(r.item.product.id),1),(0,n.Wm)(u,{"min-val":"1",amount:a.amount,"onUpdate:amount":e[1]||(e[1]=t=>a.amount=t),amountModifiers:{number:!0}},null,8,["amount"]),(0,n._)("b",V,(0,o.zw)(t.numberFormat(r.item.product.price*a.amount))+" ₽ ",1),(0,n._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[2]||(e[2]=(0,w.iM)((t=>a.deleteProduct(r.item.id)),["prevent"]))},S)])}var B=r(2374),$=r(4693),x=r(1103),F={name:"CartItem",props:["item"],computed:{amount:{get(){return this.item.amount},set(t){this.$store.dispatch("updateCartProductAmount",{id:this.item.id,amount:t})}},imageSrc(){return""===this.item.image?x:this.item.image},colorId(){return this.item?.product?.colors?.length?this.item.product.colors.find((t=>t.color.id===this.item.colorId))?.id:""}},methods:{...(0,C.nv)(["deleteCartProduct"]),async deleteProduct(t){this.deleteCartProduct(t).then((()=>{})).catch((t=>{console.log(t)}))}},components:{BaseCounter:B.Z},mixins:[$.ZP]},M=r(89);const U=(0,M.Z)(F,[["render",I]]);var W=U,j=r(8455),L={name:"CartView",components:{Breadcrumbs:f.Z,SpinnerSpring:j.Z,CartItem:W},computed:{...(0,C.Se)({products:"cartDetailProducts",productsCount:"cartProductsCount",totalPrice:"cartTotalPrice"}),...(0,C.Se)(["cartLoading","cartLoadingFailed"]),breadcrumbsData(){return[{title:"Каталог",route:"catalog",force:!0},{title:"Корзина"}]},buttonCreateOrderDisplay(){return 0===this.productsCount?"none":"inherit"}},mixins:[$.ZP]};const O=(0,M.Z)(L,[["render",g]]);var q=O}}]);
//# sourceMappingURL=371.c14cede0.js.map
"use strict";(self["webpackChunkmoire"]=self["webpackChunkmoire"]||[]).push([[128],{4826:function(t,o,e){e.d(o,{Z:function(){return r}});e(7658);var i=e(1103);function r(t,o){const e=[];return t.forEach((t=>{let r;r=t.gallery?.length&&t.gallery[0].file?.url?t.gallery:[{file:{url:i}}];let s=!0;const n=t.color.id===o;let l=0;r.forEach((o=>{e.push({id:`${t.color.id}/${l}-${o.file.url}`,color:t.id,colorId:t.color.id,photo:o.file.url,isCurrent:n&&s,colorCurrent:n}),s=!1,l++}))})),e}},3093:function(t,o,e){e.d(o,{Z:function(){return h}});var i=e(3396),r=e(7139),s=e(9242);const n={class:"breadcrumbs"},l=["onClick"];function c(t,o,e,c,a,u){return(0,i.wg)(),(0,i.iD)("ul",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.crumbs,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"breadcrumbs__item",key:t.key},[(0,i.wy)((0,i._)("a",{class:"breadcrumbs__link"},(0,r.zw)(t.title),513),[[s.F8,!t.force]]),(0,i.wy)((0,i._)("a",{class:"breadcrumbs__link",href:"#",onClick:(0,s.iM)((o=>u.goto(t)),["prevent"])},(0,r.zw)(t.title),9,l),[[s.F8,t.force]])])))),128))])}e(7658);var a={name:"BaseBreadcrumbs",props:["crumbs"],methods:{goto(t){t.force&&this.$router.push({name:t.route,query:t.params})}}},u=e(89);const d=(0,u.Z)(a,[["render",c]]);var h=d},2374:function(t,o,e){e.d(o,{Z:function(){return m}});var i=e(3396),r=e(9242);const s={class:"form__counter"},n=(0,i._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,i._)("use",{"xlink:href":"#icon-minus"})],-1),l=[n],c=(0,i._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,i._)("use",{"xlink:href":"#icon-plus"})],-1),a=[c];function u(t,o,e,n,c,u){return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("button",{type:"button","aria-label":"Убрать один товар",onClick:o[0]||(o[0]=(...t)=>u.decrease&&u.decrease(...t))},l),(0,i.wy)((0,i._)("input",{name:"count",id:"count","onUpdate:modelValue":o[1]||(o[1]=t=>c.count=t),onInput:o[2]||(o[2]=(...t)=>u.update&&u.update(...t))},null,544),[[r.nr,c.count,void 0,{number:!0}]]),(0,i._)("button",{type:"button","aria-label":"Добавить один товар",onClick:o[3]||(o[3]=(...t)=>u.increase&&u.increase(...t))},a)])}var d={name:"BaseCounter",props:["amount","minVal"],emits:["update:amount"],data(){return{count:1}},computed:{minValue(){return parseInt(this.minVal,10)||0}},methods:{checkValue(t){return t&&parseInt(t,10)?Math.max(t,this.minValue):this.minValue},update(){this.count=this.checkValue(this.count),this.onChange()},increase(){this.count=this.checkValue(this.count+1),this.onChange()},decrease(){this.count=this.checkValue(this.count-1),this.onChange()},onChange(){this.$emit("update:amount",this.count)}},watch:{amount(){this.amount!==this.count&&(this.count=this.amount)}},mounted(){this.count=this.amount}},h=e(89);const p=(0,h.Z)(d,[["render",u]]);var m=p},510:function(t,o,e){e.d(o,{Z:function(){return g}});var i=e(3396),r=e(7139),s=e(9242);const n={class:"item__pics pics"},l=["src","alt"],c={key:0,class:"pics__list"},a=["onClick"],u=["src","alt"];function d(t,o,e,d,h,p){return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",{class:"pics__wrapper",style:(0,r.j5)({height:e.mainPhotoHeight})},[(0,i._)("img",{src:p.photo,alt:e.title||"Фото",class:"pics__main",style:(0,r.j5)({height:e.mainPhotoHeight})},null,12,l)],4),p.showGallery?((0,i.wg)(),(0,i.iD)("ul",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.photos,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"pics__item",key:t.id},[(0,i._)("a",{href:"#",class:(0,r.C_)(["pics__link",{"pics__link--current":t.isCurrent}]),onClick:(0,s.iM)((o=>p.changeProductImage(t.id)),["prevent"])},[(0,i._)("img",{src:t.photo,alt:e.title},null,8,u)],10,a)])))),128))])):(0,i.kq)("",!0)])}var h=e(1103),p={name:"ProductViewPhotos",props:["photos","photoId","title","galleryVisible","mainPhotoWidth","mainPhotoHeight"],emits:["update:photoId"],computed:{photo:{get(){return this.photos.find((t=>t.id===this.photoId))?.photo||h},set(t){this.$emit("update:photoId",t)}},showGallery(){return this.galleryVisible??!0},getMainPhotoSizes(){let t=Number(this.mainPhotoWidth);Number.isNaN(t)&&(t=570);let o=Number(this.mainPhotoHeight);return Number.isNaN(o)&&(o=570),{width:t,height:o}}},methods:{changeProductImage(t){this.photo=t}}},m=e(89);const _=(0,m.Z)(p,[["render",d]]);var g=_},9088:function(t,o,e){e.d(o,{Z:function(){return g}});var i=e(3396),r=e(9242),s=e(7139);const n={class:"form__block"},l=(0,i._)("legend",{class:"form__legend"},"Цвет",-1),c={class:"colors colors--black"},a={class:"colors__label"},u=["value"],d=["title"];function h(t,o,e,h,p,m){return(0,i.wg)(),(0,i.iD)("fieldset",n,[l,(0,i._)("ul",c,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.colors,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"colors__item",key:t.id},[(0,i._)("label",a,[(0,i.wy)((0,i._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-item",value:t.id,"onUpdate:modelValue":o[0]||(o[0]=t=>m.currentColor=t)},null,8,u),[[r.G2,m.currentColor]]),(0,i._)("span",{class:"colors__value",style:(0,s.j5)({"background-color":t.color.code}),title:t.title},null,12,d)])])))),128))])])}var p={name:"ColorsSelect",props:["colors","color"],emits:["update:color"],computed:{currentColor:{get(){return this.color},set(t){this.$emit("update:color",t)}}}},m=e(89);const _=(0,m.Z)(p,[["render",h]]);var g=_},1502:function(t,o,e){e.d(o,{Z:function(){return m}});var i=e(3396),r=e(7139),s=e(9242);const n={class:"form__block"},l=(0,i._)("legend",{class:"form__legend"},"Размер",-1),c={class:"form__label form__label--small form__label--select"},a=["value"];function u(t,o,e,u,d,h){return(0,i.wg)(),(0,i.iD)("fieldset",n,[l,(0,i._)("label",c,[(0,i.wy)((0,i._)("select",{class:"form__select",name:"size","onUpdate:modelValue":o[0]||(o[0]=t=>h.currentSize=t)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.sizes,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t.id},(0,r.zw)(t.title),9,a)))),128))],512),[[s.bM,h.currentSize]])])])}var d={name:"SizesSelect",props:["sizes","size"],emits:["update:size"],computed:{currentSize:{get(){return this.size},set(t){this.$emit("update:size",t)}}}},h=e(89);const p=(0,h.Z)(d,[["render",u]]);var m=p},3128:function(t,o,e){e.r(o),e.d(o,{default:function(){return G}});var i=e(3396),r=e(7139),s=e(9242);const n={class:"content container"},l={class:"content__top"},c={class:"item"},a={class:"item__info"},u={class:"item__code"},d={class:"item__title"},h={class:"item__form"},p={class:"item__row item__row--center"},m={key:0,class:"item__price"},_={class:"item__row"},g=["disabled"],b={class:"item__desc"},f={class:"tabs"},k={class:"tabs__item"},v={class:"tabs__item"},y={key:0,class:"item__content"},w=(0,i._)("h3",null,"Состав:",-1),C=(0,i._)("br",null,null,-1),z=(0,i._)("h3",null,"Уход:",-1),D=(0,i._)("p",null,[(0,i.Uk)(" Машинная стирка при макс. 30ºC короткий отжим"),(0,i._)("br"),(0,i.Uk)(" Гладить при макс. 110ºC"),(0,i._)("br"),(0,i.Uk)(" Не использовать машинную сушку"),(0,i._)("br"),(0,i.Uk)(" Отбеливать запрещено"),(0,i._)("br"),(0,i.Uk)(" Не подвергать химчистке"),(0,i._)("br")],-1),P={key:1,class:"item__content"},I=(0,i._)("h3",null,"Доставка:",-1),Z=(0,i._)("p",null,[(0,i.Uk)(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),(0,i._)("br"),(0,i.Uk)(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),(0,i._)("br")],-1),S=(0,i._)("h3",null,"Возврат:",-1),U=(0,i._)("p",null,[(0,i.Uk)(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),(0,i._)("br"),(0,i.Uk)(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),(0,i._)("br"),(0,i.Uk)(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),(0,i._)("br")],-1),V=[I,Z,S,U];function B(t,o,e,I,Z,S){const U=(0,i.up)("ProductBreadcrumbs"),B=(0,i.up)("SpinnerSpring"),L=(0,i.up)("ProductViewPhotos"),$=(0,i.up)("BaseCounter"),N=(0,i.up)("ColorsSelect"),T=(0,i.up)("SizesSelect");return(0,i.wg)(),(0,i.iD)("main",n,[(0,i._)("div",l,[(0,i.Wm)(U,{crumbs:S.breadcrumbsData},null,8,["crumbs"])]),(0,i.Wm)(B,{visible:Z.productLoading,size:"large"},null,8,["visible"]),(0,i._)("section",c,[(0,i.Wm)(L,{photos:S.photos,"photo-id":Z.photo,"onUpdate:photoId":o[0]||(o[0]=t=>Z.photo=t),title:S.product.title,"main-photo-height":"700px"},null,8,["photos","photo-id","title"]),(0,i._)("div",a,[(0,i._)("span",u,"Артикул: "+(0,r.zw)(S.product.id),1),(0,i._)("h2",d,(0,r.zw)(S.product.title),1),(0,i._)("div",h,[(0,i._)("form",{class:"form",action:"#",method:"POST",onSubmit:o[4]||(o[4]=(0,s.iM)((t=>S.addToCart()),["prevent"]))},[(0,i._)("div",p,[(0,i.Wm)($,{"min-val":"1",amount:Z.amount,"onUpdate:amount":o[1]||(o[1]=t=>Z.amount=t),amountModifiers:{number:!0}},null,8,["amount"]),Z.productLoading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("b",m,(0,r.zw)(t.numberFormat(S.product.price))+" ₽ ",1))]),(0,i._)("div",_,[(0,i.Wm)(N,{colors:S.product.colors,color:Z.color,"onUpdate:color":o[2]||(o[2]=t=>Z.color=t)},null,8,["colors","color"]),(0,i.Wm)(T,{sizes:S.product.sizes,size:Z.size,"onUpdate:size":o[3]||(o[3]=t=>Z.size=t)},null,8,["sizes","size"])]),(0,i._)("button",{class:"item__button button button--primery button__basket-append",type:"submit",disabled:Z.productAdding},[(0,i._)("span",null,[(0,i.Uk)(" В корзину "),(0,i.Wm)(B,{class:"spinner spinner--basket-appending",visible:Z.productAdding,size:"medium",color:"white"},null,8,["visible"])])],8,g)],32)])]),(0,i._)("div",b,[(0,i._)("ul",f,[(0,i._)("li",k,[(0,i._)("a",{class:(0,r.C_)(["tabs__link",{"tabs__link--current":"info"===Z.contentBlockCurrent}]),onClick:o[5]||(o[5]=(0,s.iM)((t=>S.changeContentBlock("info")),["prevent"]))}," Информация о товаре ",2)]),(0,i._)("li",v,[(0,i._)("a",{class:(0,r.C_)(["tabs__link",{"tabs__link--current":"delivery"===Z.contentBlockCurrent}]),onClick:o[6]||(o[6]=(0,s.iM)((t=>S.changeContentBlock("delivery")),["prevent"]))}," Доставка и возврат ",2)])]),"info"===Z.contentBlockCurrent?((0,i.wg)(),(0,i.iD)("div",y,[w,(0,i._)("p",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(S.product.materials,(t=>((0,i.wg)(),(0,i.iD)("span",{key:t.id},[(0,i.Uk)((0,r.zw)(t.title),1),C])))),128))]),z,D])):"delivery"===Z.contentBlockCurrent?((0,i.wg)(),(0,i.iD)("div",P,V)):(0,i.kq)("",!0)])])])}e(7658);var L=e(3093),$=e(2374),N=e(8455),T=e(65),x=e(1445),H=e(510),M=e(9088),W=e(1502),q=e(4826),A=e(3448),F=e(4693),K={name:"ProductView",data(){return{color:null,photo:null,size:null,contentBlockCurrent:"info",amount:1,productData:null,productLoading:!1,productLoadingFailed:!1,productLoadingErrorCode:null,productAdded:!1,productAdding:!1}},computed:{product(){return this.productData?{...this.productData}:{}},breadcrumbsData(){const t=[];return t.push({title:"Каталог",route:"catalog",force:!0}),this.productData?.id?(this.productData.category?.id&&t.push({title:this.productData.category.title,route:"catalog",params:{categoryId:this.productData.category.id},force:!0}),t.push({title:this.productData.title}),t):t},photos(){return this.product?.colors?.length?(0,q.Z)(this.product.colors,this.colorId):[]},productGallery(){if(!this.product?.colors?.length)return[];const t=this.product.colors.find((t=>t.id===this.color));return t&&t.gallery?.length?t.gallery:[]},colorId(){if(!this.product?.colors?.length)return"";const t=this.product.colors.find((t=>t.id===this.color));return t?.color.id}},components:{ProductBreadcrumbs:L.Z,BaseCounter:$.Z,SpinnerSpring:N.Z,ProductViewPhotos:H.Z,ColorsSelect:M.Z,SizesSelect:W.Z},methods:{...(0,T.nv)(["addProductToCart","addNotification"]),startLoading(){this.productLoading=!0,this.productLoadingFailed=!1,clearTimeout(this.loadProductTimer)},stopLoading(){this.productLoading=!1},loadProduct(){this.startLoading(),this.loadProductTimer=setTimeout((()=>{(0,A.I0)(this.$route.params.id).then((t=>{this.productData=t.data})).catch((t=>{this.productLoadingErrorCode=t.response.status,this.productLoadingFailed=!0,console.log(t.response.statusText),this.$router.push({name:"notFound"}),this.addNotification({text:x.R0.find((o=>o.code==t.response.status))?.caption??t.response.statusText,type:"error"})})).finally((()=>this.stopLoading()))}),500)},changeContentBlock(t){this.contentBlockCurrent=t},addToCart(){const t={productId:this.product?.id,colorId:this.colorId,sizeId:this.size,quantity:this.amount};t.productId?(this.productAdded=!1,this.productAdding=!0,this.addProductToCart(t).then((()=>{this.productAdded=!0,this.addNotification({text:"Товар добавлен в корзину",type:"notify"})})).catch((t=>{console.log(t)})).finally((()=>{this.productAdding=!1}))):this.addNotification({text:"Товар не найден!",type:"error"})}},mixins:[F.ZP],watch:{product(){this.color=Number(this.$route.query.color)||this.product.colors[0].id,this.size=this.product.sizes[0].id},"$route.params.id":{handler(){this.loadProduct()},immediate:!0},color(){this.$route.query.color!=this.color&&this.$router.replace({query:{color:this.color}});const t=this.photos.filter((t=>t.color===this.color));t?.length&&(t.map((t=>t.id)).includes(this.photo)||(this.photo=t[0].id))},photo(){const t=this.photos.find((t=>t.id===this.photo))?.color;t&&t!==this.color&&(this.color=t)}}},Y=e(89);const E=(0,Y.Z)(K,[["render",B]]);var G=E}}]);
//# sourceMappingURL=128.0b1ceed5.js.map